<div class="animated fadeIn">
  <div class="card">
    <div class="card-header">
      <i class="icon-drop"></i> <strong>Company Branch</strong> 
    </div>
    <div class="card-body">
          <form #form="ngForm" [formGroup]="companyBranchForm" >
            <table>
              <tr>
                <td>
                   
                  <mat-form-field appearance="outline" style="width:240px">
                    <mat-label>Branch Name</mat-label>
                    <input type="text" matInput formControlName="branch_name" maxlength="100" required/>
                  </mat-form-field>
                </td>
                <td>                 
                  <mat-form-field  appearance="outline" style="width:240px">
                    <mat-label>Company Name </mat-label>
                    <mat-select formControlName="company_id" placeholder="Company Name">                      
                    <mat-option *ngFor="let companyName of companyName"  [value]="companyName.company_id">{{companyName.company_name}}</mat-option>
                    </mat-select>
                </mat-form-field>
                </td>
                <td>
                  <mat-form-field appearance="outline" style="width:240px">
                    <mat-label>Branch Code </mat-label>
                    <input type="text"  matInput formControlName="branch_code" maxlength="50" />
                  </mat-form-field>
                </td>
                <td>
                  <mat-form-field appearance="outline" style="width:240px">
                    <mat-label>Address Line1</mat-label>
                    <input type="text" matInput formControlName="branch_address1" maxlength="200" required/>
                  </mat-form-field>
                </td>              
              </tr>
              <tr>
                <td>
                  <mat-form-field appearance="outline" style="width:240px">
                    <mat-label>Address Line2</mat-label>
                    <input type="text" matInput formControlName="branch_address2" maxlength="200" />
                  </mat-form-field>
                </td>
                <td>
                  <mat-form-field appearance="outline" style="width:240px">
                    <mat-label>Address Line3</mat-label>
                    <input type="text" matInput formControlName="branch_address3" maxlength="200" />
                  </mat-form-field>
                </td>
                <!-- <td> 
                  <mat-form-field class="example-full-width font-h1" appearance="outline" style="width:240px">
                    <mat-label>Country</mat-label>
                       <mat-select formControlName="country" placeholder="Select"  [(ngModel)]="countryList" (ngModelChange)="countryChangeList()" required >
                           <mat-option *ngFor="let country of country" [value]="country.id">{{country.name}}</mat-option>
                        </mat-select>
                    </mat-form-field>
                </td> -->
                <td>
                  <mat-form-field class="example-full-width font-h1" appearance="outline">
                    <mat-label>Country*</mat-label>
                    <input type="text" matInput [matAutocomplete]="auto" formControlName="country"/>
                    <mat-autocomplete #auto="matAutocomplete">
                      <mat-option *ngFor="let data of filteredOptions | async" [value]="data.name" (click)="countryChangeList(data.id)">
                        {{data.name}}
                      </mat-option>
                    </mat-autocomplete>
                  </mat-form-field>
                </td>
                <!-- <td>
                  <mat-form-field class="example-full-width font-h1" appearance="outline" style="width:240px">
                    <mat-label>State</mat-label>
                       <mat-select formControlName="state" placeholder="Select"  [(ngModel)]="stateList" (ngModelChange)="stateChangeList()" required>
                           <mat-option *ngFor="let stateName of stateNames" [value]="stateName.id">{{stateName.name}}</mat-option>
                        </mat-select>
                    </mat-form-field>
                </td> -->
                <td>
                  <mat-form-field class="example-full-width font-h1" appearance="outline">
                    <mat-label>State*</mat-label>
                    <input type="text" matInput [matAutocomplete]="auto2" formControlName="state"/>
                    <mat-autocomplete #auto2="matAutocomplete">
                      <mat-option *ngFor="let ss of filteredState | async" [value]="ss.name" (click)="stateChangeList(ss.id)">
                        {{ss.name}}
                      </mat-option>
                    </mat-autocomplete>
                  </mat-form-field>
                </td>
              </tr>              
              <tr>
                <!-- <td>
                    <mat-form-field appearance="outline" style="width:240px">
                     <mat-label>City</mat-label>
                       <mat-select formControlName="city" placeholder="Select" [(ngModel)]="cityList"  required>
                         <mat-option *ngFor="let cityName of cityNames" [value]="cityName.id">{{cityName.name}}</mat-option>
                      </mat-select>
                   </mat-form-field>
                </td> -->
                <td>
                  <mat-form-field class="example-full-width font-h1" appearance="outline">
                    <mat-label>City*</mat-label>
                    <input type="text" matInput [matAutocomplete]="auto3" formControlName="city"/>
                    <mat-autocomplete #auto3="matAutocomplete">
                      <mat-option *ngFor="let cc of filteredCity | async" [value]="cc.name">
                        {{cc.name}}
                      </mat-option>
                    </mat-autocomplete>
                  </mat-form-field>
                </td>
                <td>
                   <mat-form-field appearance="outline" style="width:240px">
                      <mat-label>PIN Code</mat-label>
                       <input type="text" matInput formControlName="pincode" maxlength="6" required />
                    </mat-form-field>
                </td>                
                <td>
                    <mat-form-field appearance="outline" style="width:240px">
                      <mat-label>Contact Number</mat-label>
                      <input type="text" matInput formControlName="contact_no" maxlength="12" required />
                    </mat-form-field>
                  </td>
                  <td>
                    <mat-form-field appearance="outline" style="width:240px">
                      <mat-label>Alternative Contact Number</mat-label>
                      <input type="text" matInput formControlName="alternative_contact_no" maxlength="12"  />
                    </mat-form-field>
                  </td>              
              </tr>
              <tr>
                <td>
                  <mat-form-field appearance="outline" style="width:240px">
                    <mat-label>Email</mat-label>
                    <input type="text" matInput formControlName="email" maxlength="100" required />
                  </mat-form-field>
                </td>
                <td>
                  <mat-form-field appearance="outline" style="width:240px">
                    <mat-label>Alternative Email</mat-label>
                    <input type="text" matInput formControlName="alternative_email" maxlength="100"  />
                  </mat-form-field>
                </td>
                <td>      
                  <mat-form-field class="example-full-width font-h1" appearance="outline" style="width:240px">
                   <mat-label>Status</mat-label>
                      <mat-select formControlName="status" placeholder="Select">
                          <mat-option *ngFor="let status of Option" [value]="status">{{status}}</mat-option>
                       </mat-select>
                   </mat-form-field>
               </td> 
              </tr>
            </table>
            <div class="card-footer">
              <button class="btn btn-sm btn-primary" type="submit"  (click)="onSubmit()">
                {{btnName}}
              </button>
              <button type="reset" class="btn btn-sm btn-danger" (click)="resetForm(companyBranchForm)"><i class="fa fa-ban"></i> Cancel</button>
            </div>
          </form>
    </div>
  </div>
 </div>
 <div class="form-group"> 
  <div class="controls">
    <div class="input-group">
      <!-- <input id="appendedInputButtons" size="16" class="form-control" type="text"> -->
      <input #filter [(ngModel)]="id"  (keyup)="applyFilter($event.target.value)" placeholder="Search"  size="16" class="form-control">
      <span class="input-group-append">
        <button class="btn btn-secondary" *ngIf="id" (click)="onSearchClear()" type="button">Clear</button>   
      </span>
    </div>
  </div>
</div>
<div class="card"> 
  <mat-table [dataSource]="listdata"  >
    <ng-container matColumnDef="company_name">
        <mat-header-cell *matHeaderCellDef> Company Name </mat-header-cell>
        <mat-cell *matCellDef="let element"> {{element.company_name}} </mat-cell>
    </ng-container>
    <ng-container matColumnDef="branch_name">
      <mat-header-cell *matHeaderCellDef>  Branch Name</mat-header-cell>
      <mat-cell *matCellDef="let element"> {{element.branch_name}} </mat-cell>
  </ng-container>
  <ng-container matColumnDef="status">
    <mat-header-cell *matHeaderCellDef> Status </mat-header-cell>
    <mat-cell *matCellDef="let element"> {{element.status}} </mat-cell>
</ng-container>
    <ng-container matColumnDef="actions">      
        <mat-header-cell *matHeaderCellDef> Actions </mat-header-cell>
        <mat-cell *matCellDef="let element"> 
          <button type="button" class="btn btn-sm btn-primary" (click)="onEditBtnClick(element.branch_id)"><i class="fa fa-lightbulb-o"></i>&nbsp;Edit</button>
          <!-- <button type="button" class="btn btn-sm btn-danger m-2" (click)="onDeleteBtnClick(element.company_id)"><i class="fa fa-lightbulb-o"></i>&nbsp;Delete</button> -->
        </mat-cell>
    </ng-container>
<mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
<mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
</mat-table>
</div>
 
  